<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>App Score Calculator</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
      .card { max-width: 640px; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; box-shadow: 0 1px 2px rgba(0,0,0,0.06); }
      h1 { margin-top: 0; font-size: 1.25rem; }
      label { display: block; font-weight: 600; margin-bottom: 6px; }
      input[type="number"] { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; }
      button { margin-top: 12px; padding: 10px 14px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; }
      button:disabled { background: #9ca3af; cursor: not-allowed; }
      .result { margin-top: 16px; padding: 12px; background: #f3f4f6; border-radius: 8px; }
      .error { color: #b91c1c; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>App Score Calculator</h1>
      <form id="calc-form">
        <label for="input">Input value</label>
        <input id="input" name="input" type="number" step="any" required />
        <button id="submit" type="submit">Calculate</button>
      </form>
      <div id="output" class="result" hidden></div>
    </div>

    <script>
      const form = document.getElementById('calc-form');
      const output = document.getElementById('output');
      const submit = document.getElementById('submit');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        submit.disabled = true;
        output.hidden = true;
        output.classList.remove('error');
        output.textContent = '';
        try {
          const formData = new FormData(form);
          const res = await fetch('/calculate', { method: 'POST', body: formData });
          const data = await res.json();
          if (!data.ok) throw new Error(data.error || 'Unknown error');
          output.textContent = `Result: ${data.result}`;
          output.hidden = false;
        } catch (err) {
          output.textContent = err.message;
          output.classList.add('error');
          output.hidden = false;
        } finally {
          submit.disabled = false;
        }
      });
    </script>
  </body>
</html>
